{% extends 'FuzAppBundle::layout.html.twig' %}

{% block extra_js %}
    <script src="{{ asset('bundles/fuzapp/js/collection/jquery.collection.js') }}"></script>
{% endblock %}

{% block title %}Advanced usage: MVC compliance{% endblock %}

{% block body %}

    <h2>{{ block('title') }}</h2>

    <p>
        In the <a href="{{ path('basic') }}">Basic Usage</a> example, we defined the collection's selector in the form type, but that's not a
        good practice, as a selector should take part of the view.
    </p>

    <p>
        You can reference your form collection using any container, such as a <code>{{ '<div>'|e }}</code>, and setting
        <code>data-collection="{% verbatim %}{{ form.collectionField.vars.id }}{% endverbatim %}"</code>.
    </p>

    {{
        github([
            'Controller/AdvancedController.php',
            'Resources/views/Advanced/mvcCompliance.html.twig',
        ])
    }}

    {% form_theme form 'FuzAppBundle::jquery.collection.html.twig' %}
    {{ form(form) }}

    <hr/>

    {% for value in data.values %}
        <p>Value : {{ value }}</p>
    {% endfor %}

    <hr/>

    <p>Code used:</p>
    <pre>{{ block('script') | e }}</pre>

{% endblock %}

{% block script %}

    <!-- Note that data-collection="(...)" was generated by the form component, I used {% verbatim %}data-collection="{{ form.values.vars.id }}"{% endverbatim %} -->
    <div class="i-am-a-collection" data-collection="{{ form.values.vars.id }}"></div>

    <script type="text/javascript">
        $('.i-am-a-collection').collection();
    </script>

{% endblock %}
